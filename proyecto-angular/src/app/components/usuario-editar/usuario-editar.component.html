<section id="actions" class="py-4 mb-4 bg-light">
  <div class="container">
    <div class="row">
      <div class="alert alert-success" *ngIf="status == 'success'">
        Ha editado sus datos correctamente,
        <a [routerLink]="['/perfil-usuario/', identity.sub]"> compru√©balo!</a>
      </div>
      <div class="alert alert-danger" *ngIf="status == 'error'">
        Ha habido un error a la hora editar su perfil, vuelva a intentarlo.
      </div>
    </div>
  </div>
</section>
<section id="registro">
  <div class="container">
    <div class="row">
      <div class="col-md-6 mx-auto">
        <div class="card">
          <div class="card-header">
            <h4>Editar Perfil</h4>
          </div>
          <div class="card-body">
            <form #editUserForm="ngForm" (ngSubmit)="onSubmit(editUserForm)">
              <div class="form-group">
                <label for="email">Email</label>
                <input
                  type="email"
                  class="form-control"
                  name="email"
                  #email="ngModel"
                  [(ngModel)]="user.email"
                  required
                  ngModel
                  email="true"
                  ng-pattern="asd"
                />
                <span *ngIf="!email.valid && email.touched">
                  El campo Email es obligatorio
                </span>
              </div>
              <div class="form-group">
                <label for="password">Password</label>
                <input
                  type="password"
                  class="form-control"
                  name="password"
                  #password="ngModel"
                  [(ngModel)]="user.password"
                  required
                  minlength="8"
                  maxlength="15"
                />
                <span *ngIf="!password.valid && password.touched">
                  El campo Password es obligatorio
                </span>
              </div>
              <div class="form-group">
                <label for="name">Nombre</label>
                <input
                  type="text"
                  class="form-control"
                  name="name"
                  #name="ngModel"
                  [(ngModel)]="user.name"
                  required
                  minlength="1"
                />
                <span *ngIf="!name.valid && name.touched">
                  El campo Nombre es obligatorio
                </span>
              </div>
              <div class="form-group">
                <label for="surname">Apellidos</label>
                <input
                  type="text"
                  class="form-control"
                  name="surname"
                  #surname="ngModel"
                  [(ngModel)]="user.surname"
                  required
                  minlength="1"
                />
                <span *ngIf="!surname.valid && surname.touched">
                  El campo Apellidos es obligatorio
                </span>
              </div>
              <div class="form-group">
                <label for="avatar">Avatar</label>
                <div *ngIf="identity && identity.avatar">
                  <img
                    src="{{ url + 'user/avatar/' + identity.avatar }}"
                    class="avatar_editar"
                  />
                </div>
                <angular-file-uploader
                  [config]="afuConfig"
                  (ApiResponse)="avatarUpload($event)"
                >
                </angular-file-uploader>
              </div>
              <br />

              <input
                type="submit"
                value="Editar"
                class="btn btn-success btn-block"
              />
            </form>
          </div>
        </div>
      </div>
    </div>
  </div>
</section>
